<div class="dashboard-container">
  <h1>Financial Insights 2026</h1>

  <div class="chart-grid">
    <div class="chart-card">
      <h3>Spending by Card (Total)</h3>
      <div class="canvas-wrapper">
        <canvas baseChart
          [data]="barChartData"
          [options]="chartOptions"
          [type]="'bar'"
          (chartClick)="onChartClick($event)"></canvas>
      </div>
    </div>

    <div class="chart-card">
      <h3>Spending by Category</h3>
      <div class="canvas-wrapper">
        <canvas baseChart
          [data]="doughnutChartData"
          [options]="chartOptions"
          [type]="'doughnut'">
        </canvas>
      </div>
    </div>
  </div>

<div class="transaction-section">
  <h3>
    Transactions {{ selectedCard() ? 'for ' + selectedCard() : '(All Cards)' }}
    <button *ngIf="selectedCard()" (click)="selectedCard.set(null)">Clear Filter</button>
  </h3>
  
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Category</th>
        <th>Description</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
      @for (t of filteredTransactions(); track t.id) {
        <tr>
          <td>{{ t.date | date:'shortDate' }}</td>
          <td>{{ t.category }}</td>
          <td>{{ t.description }}</td>
          <td>{{ t.amount | currency }}</td>
        </tr>
      }
    </tbody>
  </table>
</div>
</div>